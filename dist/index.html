<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Screen Recorder</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #1e1e1e;
      color: white;
    }

    header {
      padding: 15px;
      font-size: 20px;
      background: #2b2b2b;
    }

    .status-bar {
      display: flex;
      justify-content: space-between;
      padding: 10px 20px;
      background: #252525;
      align-items: center;
    }

    .indicator {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: gray;
      margin-right: 10px;
    }

    .controls {
      display: flex;
      justify-content: center;
      gap: 15px;
      padding: 20px;
    }

    button {
      padding: 10px 20px;
      border: none;
      background: #3a3a3a;
      color: white;
      cursor: pointer;
      border-radius: 5px;
    }

    button:hover {
      background: #505050;
    }

    .preview {
      height: 250px;
      background: #121212;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 18px;
      color: #777;
    }

    .settings-panel {
      position: fixed;
      top: 0;
      right: -300px;
      width: 300px;
      height: 100%;
      background: #2b2b2b;
      padding: 20px;
      transition: 0.3s;
    }

    .settings-panel.open {
      right: 0;
    }

    select, input {
      width: 100%;
      margin-bottom: 15px;
    }
  </style>
</head>

<body>

<header>Screen Recorder</header>

<div class="status-bar">
  <div style="display:flex; align-items:center;">
    <div class="indicator" id="indicator"></div>
    <span id="status">Idle</span>
  </div>
  <div id="timer">00:00:00</div>
</div>

<div class="preview">
  Preview Disabled (Coming Soon)
</div>

<div class="controls">
  <button onclick="start()">Start</button>
  <button onclick="pause()">Pause</button>
  <button onclick="stop()">Stop</button>
  <button onclick="toggleSettings()">Settings</button>
</div>

<div class="settings-panel" id="settings">
  <h3>Settings</h3>
  <label>Resolution</label>
  <select>
    <option>720p</option>
    <option selected>1080p</option>
    <option>1440p</option>
    <option>4K</option>
  </select>

  <label>FPS</label>
  <select>
    <option>30</option>
    <option>60</option>
  </select>

  <label><input type="checkbox" checked> Record Audio</label>
  <label><input type="checkbox"> Enable Hotkeys</label>
</div>

<script>
  const { invoke } = window.__TAURI__.core;

  let seconds = 0;
  let timerInterval;

  function formatTime(sec) {
    const h = String(Math.floor(sec / 3600)).padStart(2,'0');
    const m = String(Math.floor((sec % 3600) / 60)).padStart(2,'0');
    const s = String(sec % 60).padStart(2,'0');
    return `${h}:${m}:${s}`;
  }

  function startTimer() {
    timerInterval = setInterval(() => {
      seconds++;
      document.getElementById("timer").innerText = formatTime(seconds);
    }, 1000);
  }

  function stopTimer() {
    clearInterval(timerInterval);
    seconds = 0;
    document.getElementById("timer").innerText = "00:00:00";
  }

  function start() {
    invoke("start_recording");
    document.getElementById("status").innerText = "Recording";
    document.getElementById("indicator").style.background = "red";
    startTimer();
  }

  function pause() {
    invoke("pause_recording");
    document.getElementById("status").innerText = "Paused";
    document.getElementById("indicator").style.background = "yellow";
  }

  function stop() {
    invoke("stop_recording");
    document.getElementById("status").innerText = "Idle";
    document.getElementById("indicator").style.background = "gray";
    stopTimer();
  }

  function toggleSettings() {
    document.getElementById("settings").classList.toggle("open");
  }
</script>

</body>
</html>
